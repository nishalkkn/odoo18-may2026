//var AppointmentScheduler = (function() {
//    function init(containerId, config = {}) {
//        const container = document.getElementById(containerId);
//        if (!container) {
//            console.error('Container not found:', containerId);
//            return;
//        }
//
//        const settings = {
//            interval: config.interval || 15,
//            startTime: config.startTime || '09:00',
//            endTime: config.endTime || '17:00',
//            employees: config.employees || [],
//            onAppointmentCreate: config.onAppointmentCreate || function() {}
//        };
//
//        // Create scheduler structure
//        container.innerHTML = `
//            <div class="scheduler-wrapper">
//                <div class="time-column"></div>
//                <div class="schedule-grid"></div>
//            </div>
//            <div class="scheduler-modal" style="display: none;">
//                <div class="modal-content">
//                    <span class="close-modal">&times;</span>
//                    <h3>Create Appointment</h3>
//                    <div class="appointment-details">
//                        <p>Time: <span class="selected-time"></span></p>
//                        <p>Employee: <span class="selected-employee"></span></p>
//                        <button class="create-btn">Create Appointment</button>
//                    </div>
//                </div>
//            </div>
//        `;
//
//        // Add styles
//        const styleSheet = document.createElement('style');
//        styleSheet.textContent = `
//            .scheduler-wrapper {
//                display: flex;
//                border: 1px solid #ddd;
//                font-family: Arial, sans-serif;
//            }
//            .time-column {
//                width: 100px;
//                border-right: 1px solid #ddd;
//            }
//            .schedule-grid {
//                flex-grow: 1;
//                display: flex;
//            }
//            .time-slot {
//                padding: 8px;
//                border-bottom: 1px solid #eee;
//                cursor: grab;
//                background: #f5f5f5;
//                margin: 2px;
//                border-radius: 3px;
//            }
//            .employee-column {
//                flex: 1;
//                min-width: 150px;
//                border-right: 1px solid #eee;
//            }
//            .employee-header {
//                padding: 10px;
//                background: #f8f9fa;
//                text-align: center;
//                font-weight: bold;
//                border-bottom: 1px solid #ddd;
//            }
//            .drop-zone {
//                height: 40px;
//                border-bottom: 1px solid #eee;
//            }
//            .drop-zone.dragover {
//                background: #e6f3ff;
//            }
//            .scheduler-modal {
//                position: fixed;
//                top: 0;
//                left: 0;
//                width: 100%;
//                height: 100%;
//                background: rgba(0,0,0,0.5);
//                display: flex;
//                align-items: center;
//                justify-content: center;
//            }
//            .modal-content {
//                background: white;
//                padding: 20px;
//                border-radius: 5px;
//                min-width: 300px;
//            }
//            .close-modal {
//                float: right;
//                cursor: pointer;
//                font-size: 20px;
//            }
//            .create-btn {
//                background: #007bff;
//                color: white;
//                border: none;
//                padding: 8px 16px;
//                border-radius: 4px;
//                cursor: pointer;
//                margin-top: 10px;
//            }
//            .create-btn:hover {
//                background: #0056b3;
//            }
//        `;
//        document.head.appendChild(styleSheet);
//
//        // Generate time slots
//        function generateTimeSlots() {
//            const [startHour, startMinute] = settings.startTime.split(':').map(Number);
//            const [endHour, endMinute] = settings.endTime.split(':').map(Number);
//
//            const slots = [];
//            let currentTime = new Date();
//            currentTime.setHours(startHour, startMinute, 0);
//
//            const endTime = new Date();
//            endTime.setHours(endHour, endMinute, 0);
//
//            while (currentTime <= endTime) {
//                slots.push(currentTime.toLocaleTimeString('en-US', {
//                    hour: '2-digit',
//                    minute: '2-digit',
//                    hour12: true
//                }));
//                currentTime = new Date(currentTime.getTime() + settings.interval * 60000);
//            }
//
//            return slots;
//        }
//
//        // Render scheduler
//        function renderScheduler() {
//            const timeSlots = generateTimeSlots();
//            const timeColumn = container.querySelector('.time-column');
//            const scheduleGrid = container.querySelector('.schedule-grid');
//
//            // Render time slots
//            timeColumn.innerHTML = timeSlots.map(time => `
//                <div class="time-slot" draggable="true" data-time="${time}">
//                    ${time}
//                </div>
//            `).join('');
//
//            // Render employee columns
//            scheduleGrid.innerHTML = settings.employees.map(employee => `
//                <div class="employee-column" data-employee-id="${employee.id}">
//                    <div class="employee-header">${employee.name}</div>
//                    ${timeSlots.map(() => '<div class="drop-zone"></div>').join('')}
//                </div>
//            `).join('');
//        }
//
//        // Setup drag and drop
//        function setupDragAndDrop() {
//            let draggedTime = null;
//
//            container.addEventListener('dragstart', (e) => {
//                if (e.target.classList.contains('time-slot')) {
//                    draggedTime = e.target.dataset.time;
//                    e.target.style.opacity = '0.5';
//                }
//            });
//
//            container.addEventListener('dragend', (e) => {
//                if (e.target.classList.contains('time-slot')) {
//                    e.target.style.opacity = '1';
//                }
//            });
//
//            container.addEventListener('dragover', (e) => {
//                if (e.target.classList.contains('drop-zone')) {
//                    e.preventDefault();
//                    e.target.classList.add('dragover');
//                }
//            });
//
//            container.addEventListener('dragleave', (e) => {
//                if (e.target.classList.contains('drop-zone')) {
//                    e.target.classList.remove('dragover');
//                }
//            });
//
//            container.addEventListener('drop', (e) => {
//                if (e.target.classList.contains('drop-zone')) {
//                    e.preventDefault();
//                    e.target.classList.remove('dragover');
//
//                    const employeeColumn = e.target.closest('.employee-column');
//                    const employeeId = employeeColumn.dataset.employeeId;
//                    const employee = settings.employees.find(emp => emp.id === employeeId);
//
//                    if (draggedTime && employee) {
//                        showModal(draggedTime, employee);
//                    }
//                }
//            });
//        }
//
//        // Modal handling
//        function showModal(time, employee) {
//            const modal = container.querySelector('.scheduler-modal');
//            modal.querySelector('.selected-time').textContent = time;
//            modal.querySelector('.selected-employee').textContent = employee.name;
//            modal.style.display = 'flex';
//
//            const appointment = {
//                time: time,
//                employeeId: employee.id,
//                employeeName: employee.name
//            };
//
//            modal.querySelector('.create-btn').onclick = () => {
//                settings.onAppointmentCreate(appointment);
//                modal.style.display = 'none';
//            };
//
//            modal.querySelector('.close-modal').onclick = () => {
//                modal.style.display = 'none';
//            };
//
//            window.onclick = (e) => {
//                if (e.target === modal) {
//                    modal.style.display = 'none';
//                }
//            };
//        }
//
//        // Initialize
//        renderScheduler();
//        setupDragAndDrop();
//    }
//
//    return {
//        init: init
//    };
//})();
//
//// Expose to global scope
//window.AppointmentScheduler = AppointmentScheduler;